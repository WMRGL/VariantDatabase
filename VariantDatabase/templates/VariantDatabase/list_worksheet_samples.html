{% extends 'VariantDatabase/base.html' %}

  {% block content %}

  	<br>

  	<div class="alert alert-info">
  		You are viewing information relating to: <strong> {{ worksheet }} </strong>
	</div>

   <ul class="nav nav-tabs">

    <li class="active"><a data-toggle="tab" href="#samples">Samples</a></li>
    <li><a data-toggle="tab" href="#QC">QC</a></li>
    <li><a data-toggle="tab" href="#history">History</a></li>

  </ul>

  <br>

  <div class="tab-content">


  	<div id="samples" class="tab-pane fade in active">


  	<table class = 'table table-hover'>

		<tr>
			<th> Sample Name </th>

			<th> Sample Status </th>



		</tr>


		{% for sample in samples_in_worksheet %}

		<tr>

			<td> <a href= "{% url 'sample_summary' sample.pk  %}"> {{ sample.name }}   </a> </td>

			<td>{{ sample.get_status      }} </td>
		

		</tr>

		{% endfor %}


	</table>

	</div>

	<div id="QC" class="tab-pane fade">

	


		{% if worksheet.awaiting_qc_approval   %}




	    <div class="panel panel-danger">
        <div class="panel-heading">Approve QC</div>
        <div class="panel-body"> <form class="form-horizontal" method="post">{% csrf_token %}

        <p> Please check and then approve the QA </p>

            {{ form.as_p }}

        <br>

        <div class="form-actions">

            <button type="submit" class="btn btn-primary">Approve</button>

        </div>
    
        </form>

        </div>
        </div>

	{% else %}


	<div class="alert alert-success">
  		<strong>Success!</strong> QA Approved
	</div>


	{% endif  %}



        

	</div>







	<div id="history" class="tab-pane fade">

	


		<table class = 'table table-hover'>

		<thead>

		<tr>
			<th> Change Category </th>
			<th> Change Description </th>
			<th> Date </th>
			<th> User </th> 

		</tr>


		</thead>

		<tbody>

		{% for change in worksheet.get_history %}

			<tr>

				<td> {{ change }} </td>
				<td> {{ change.changes }} </td>
				<td> {{ change.timestamp}} </td>
				<td> {{ change.actor }} </td>

			</tr>

		{% endfor %}



		</tbody>


		</table>



	</div>

	</div>
     
  {% endblock %}